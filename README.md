# .NET Microservices CI/CD Starter  \n\nThis repository provides a minimal starting point for building and deploying a microservices architecture using .NET and Kubernetes with a GitHub Actions workflow.  \n\n## Structure  \n\n- `src/ServiceA` – Sample ASP.NET Core minimal API service.  \n- `src/ServiceB` – Another sample service.  \n- `k8s/` – Kubernetes manifests for deploying the services.  \n- `helm/chart/` – Minimal Helm chart for deploying the services.  \n- `.github/workflows/dotnet.yml` – CI/CD pipeline that builds, tests, creates Docker images, pushes to a container registry, and deploys to a local Kubernetes cluster.  \n\n## GitHub Actions Workflow  \n\nThe workflow is defined in `.github/workflows/dotnet.yml` and runs on pushes to the `main` branch. It performs the following steps:  \n\n1. **Checkout and set up .NET** – Checks out the repository and installs the specified .NET SDK.  \n2. **Restore, build & test** – Restores NuGet packages, builds each service in `src`, and runs unit tests.  \n3. **Build & push Docker images** – Builds Docker images for each service with tags based on the commit SHA and pushes them to your configured container registry.  \n4. **Deploy to local Kubernetes** – Uses `kubectl` and Helm to deploy the services to a local cluster (e.g. `kind` or `minikube`) as a staging environment.  \n\nSee the workflow file for details.  \n\n## Required Secrets  \n\nTo push Docker images and deploy to Kubernetes, the workflow expects these GitHub repository secrets:  \n\n- `REGISTRY_USERNAME` – username for your container registry (e.g. Docker Hub).  \n- `REGISTRY_PASSWORD` – password or token for the container registry.  \n- `REGISTRY_URL` – registry URL (e.g. `ghcr.io`, `docker.io`).  \n- `KUBE_CONFIG_DATA` – base64‑encoded kubeconfig for your local cluster (for deploying from the action).  \n- `HELM_KUBE_CONTEXT` – name of the kube context in your kubeconfig to use.  \n\nCreate these secrets in the repository settings before running the workflow.  \n\n## Running Locally  \n\n1. Install [.NET](https://dotnet.microsoft.com/) 8.0 or later.  \n2. Run each service locally:  \n\n   ```bash  \n   cd src/ServiceA  \n   dotnet run  \n   ```  \n\n3. Build Docker images:  \n\n   ```bash  \n   docker build -t your-registry/servicea:local -f src/ServiceA/Dockerfile .  \n   ```  \n\n4. Deploy to your local Kubernetes cluster:  \n\n   ```bash  \n   # Using manifests  \n   kubectl apply -f k8s/  \n\n   # Using Helm  \n   helm install microservices helm/chart  \n   ```  \n\nMake sure you have a local Kubernetes cluster such as [kind](https://kind.sigs.k8s.io/) or [minikube](https://minikube.sigs.k8s.io/) running.  \n\n## Notes  \n\n- The provided services are minimal and meant to demonstrate the CI/CD pipeline.  \n- Modify the Dockerfiles, manifests, and Helm chart to suit your own services and configurations.  \n
